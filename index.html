<!DOCTYPE html>
<html lang="en">
  <head>

    <!-- Added -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>HomeRush</title>
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/icon" href="assets/images/favicon.ico"/>
    <!-- Font Awesome -->
    <link href="assets/css/font-awesome.css" rel="stylesheet">
    <!-- Bootstrap -->
    <link href="assets/css/bootstrap.css" rel="stylesheet">    
    <!-- Slick slider -->
    <link rel="stylesheet" type="text/css" href="assets/css/slick.css"/> 
    <!-- Fancybox slider -->
    <link rel="stylesheet" href="assets/css/jquery.fancybox.css" type="text/css" media="screen" /> 
    <!-- Animate css -->
    <link rel="stylesheet" type="text/css" href="assets/css/animate.css"/>  
     <!-- Theme color -->
    <link id="switcher" href="assets/css/theme-color/default-theme.css" rel="stylesheet">

    <!-- Main Style -->
    <link href="style.css" rel="stylesheet">

    <!-- Fonts -->

    <!-- Open Sans for body font -->
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    <!-- Cabin for Title -->
    <link href='https://fonts.googleapis.com/css?family=Cabin' rel='stylesheet' type='text/css'>
    <!-- Pacifico for Logo   -->
    <link href='https://fonts.googleapis.com/css?family=Pacifico' rel='stylesheet' type='text/css'>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>  

  <!-- BEGAIN PRELOADER -->
  <div id="preloader">
    <div id="status">&nbsp;</div>
  </div>
  <!-- END PRELOADER -->


  <style>
    input, textarea, button {
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
        font-size: 16px;
        color: #333;
    }
  </style>
  
  <!-- Start menu area -->
  <div class="nav-area">      
    <a id="menu-btn" href="#"><i class="fa fa-bars"></i></a>
    <nav class="main-nav" id="main-menu">
      <span class="fa fa-remove" id="close"></span>
      <ul>  
        <li> <a href="#header"><i class="fa fa-home"></i><span>Home</span></a></li>
        <li><a href="#features"><i class="fa fa-server"></i><span>Features</span></a></li>
        <li><a href="#contact"><i class="fa fa-envelope-o"></i><span>Contact</span></a></li>
        <li><a href="#download-app"><i class="fa fa-download"></i><span>Download</span></a></li>         
      </ul>      
    </nav>
  </div>  
  <!-- End menu area -->

  </div>
  <div id="popup" style="display:none;">
      <h1>감사합니다. </h1>
      <p>주신 피드백이 있다면 적극 반영하겠습니다. </p>
      </div>

  <!-- Start header section --> 
  <header id="header">
    <div class="header-inner">
      <!-- Header image -->
      <img src="assets/images/header-bg.jpg" alt="img">
      <div class="overlay">
        <div class="header-content">
          <div class="container">
            <div class="row">
              <div class="col-md-12">
                <div class="header-top">
                  <!-- Start logo area -->
                  <div class="logo-area">
                    <!-- Image based logo -->
                    <a class="logo" href="index.html"><img src="assets/images/logo.png" alt="logo"></a>
                    <!-- Text based logo -->
                    <!-- <a class="logo" href="index.html">App Landy.</a> -->
                  </div>
                  <!-- End logo area -->                 
                </div>
              </div>
              <div class="col-md-12">
                <div class="header-bottom">
                <div class="row">
                  <div class="col-md-6 col-sm-6">
                    <div class="header-bottom-left">
                      <h1>빈 좌석이 없는 버스 때문에 끝 없이 기다려보셨나요?</h1>
                      <p>과거 데이터를 학습해 가장 빠르고, 실현 가능한 경로를 실시간으로 제공해드리겠습니다.</p>
                      <a class="download-btn" href="#">출시 예정</a>
                    </div>
                  </div>
                  <div class="col-md-6 col-sm-6">
                    <div class="header-bottom-right">
                      <!-- <img src="assets/images/iphone-group1.png" alt="iphone grpup img"> -->
                      <img src="assets/images/Nexus-6-MockUp-group.png" alt="">
                    </div>
                  </div>
                </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>      
    </div>
  </header>
  <!-- End header section --> 

  <!-- Start Features -->
  <section id="features">
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <div class="title-area">
            <h2 class="title">더 정확하고 <span>편리하게</span></h2>
            <p>*과거/현재 데이터 활용</p>
          </div>
        </div>
        <div class="col-md-12">
          <div class="features-area">
            <div class="row">
              <!-- Start features left -->
              <div class="col-md-4">
                <div class="features-left">
                  <ul class="features-list features-list-left">
                    <li class="wow fadeInLeft" data-wow-duration="0.5s" data-wow-delay="0.5s">
                      <i class="fa fa-desktop"></i>
                      <div class="features-content">
                        <h4>우회 경로</h4>
                        <p>현 시점 기준 어느 역/정류장에서 대기하면 가장 빠르고 편할지 우회경로를 알려드립니다.</p>
                      </div>
                    </li>
                    <li class="wow fadeInLeft" data-wow-duration="0.75s" data-wow-delay="0.75s">
                      <i class="fa fa-edit"></i>
                      <div class="features-content">
                        <h4>대체 경로</h4>
                        <p>언제든지 가능한 대체경로와 ETA를 하나의 화면에서 확인하세요.</p>
                      </div>
                    </li>
                    <li class="wow fadeInLeft" data-wow-duration="1s" data-wow-delay="1s">
                      <i class="fa fa-object-ungroup"></i>
                      <div class="features-content">
                        <h4>사용자 기반 예측</h4>
                        <p>사용자별 보행 속도 설정 및 경로 우선 순위 설정을 다양하고 편리하게 변경할 수 있습니다.</p>
                        <p>경로 우선 순위: 도착 시간, 착석 여부, 적은 환승, 적은 비용 등</p>
                      </div>
                    </li>
                  </ul>
                </div>
              </div>
              <!-- End features left -->
              <!-- Start features img -->
              <div class="col-md-4">
                <div class="feature-img wow fadeInUp">
                  <img src="assets/images/ai.png" alt="">
                </div>
              </div>
              <!-- End features img -->
              <!-- Start features right -->
              <div class="col-md-4">
                <div class="features-right">
                  <ul class="features-list features-list-right">
                    <li class="wow fadeInRight" data-wow-duration="0.5s" data-wow-delay="0.5s">
                      <i class="fa fa-rocket"></i>
                      <div class="features-content">
                        <h4>실시간 정체 및 신호</h4>
                        <p>앞선 버스/전철의 소요시간을 활용해 실시간 정체를 반영하고, 신호상황에 맞게 ETA가 조정됩니다.</p>
                      </div>
                    </li>
                    <li class="wow fadeInRight" data-wow-duration="0.75s" data-wow-delay="0.75s">
                      <i class="fa fa-cogs"></i>
                      <div class="features-content">
                        <h4>경로별 기댓값 제공</h4>
                        <p>다양한 경로별로 도착시간 및 탑승가능성에 대한 확률을 현 시점 데이터에 기반해 제공합니다.</p>
                      </div>
                    </li>
                    <li class="wow fadeInRight" data-wow-duration="1s" data-wow-delay="1s">
                      <i class="fa fa-flask"></i>
                      <div class="features-content">
                        <h4>사용자 수요를 대기 인원 수에 실시간 반영</h4>
                        <p>사용자가 선택한 경로에 따라 결정된 대기 탑승수요를 기반으로 더 정밀한 예측이 가능합니다.</p>
                      </div>
                    </li>
                    <li class="wow fadeInRight" data-wow-duration="1s" data-wow-delay="1s">
                      <i class="fa fa-support"></i>
                      <div class="features-content">
                        <h4>심플하고 편리한 UI</h4>
                        <p>정보를 단순하고 직관적으로 표시하여 손쉽게 최적의 경로를 선택할 수 있습니다.</p>
                      </div>
                    </li>
                  </ul>
                </div>
              </div>   
              <!-- End features right -->                 
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- End Features -->

  <!-- Start contact -->
  <section id="contact">
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <div class="title-area">
              <h2 class="title"> Notification <span>&</span> Feedback </h2>
              <p>이메일을 남겨주시면 정식 출시 후 알려드리겠습니다.</p>
          </div>
        </div>
        <div class="col-md-12">
          <div class="contact-area">
              <div class="form-group">                
                <input id="submit-email" type="email" class="form-control" placeholder="이메일">
              </div>
              <div class="form-group">                  
                <textarea id="submit-advice" class="form-control" rows="3" placeholder="(optional) 기존에 불편하셨던 점이나 반드시 지원되었으면 하는 서비스가 있다면 저에게 알려주세요, 그 외의 하실 말씀이 있다면 모두 환영합니다!"></textarea>
              </div>
              <div class="send-area">
                <button id="submit" class="send-btn">제출!</button>
              </div> 
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- End contact -->

  <!-- Start download app -->
  <section id="download-app">
    <div class="download-overlay">
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <div class="title-area wow fadeInUp">
              <h2 class="title">Download <span>App</span></h2>
              <p>Hold tight! We're finalizing the details, and the launch will be underway soon.</p>
            </div>
          </div>
          <!-- Start download app content -->
          <div class="col-md-12">
            <div class="download-app-content">
              <!-- Start single download -->
              <a class="single-download wow fadeInLeft" data-wow-duration="0.5s" data-wow-delay="0.5s" href="#">
                <div class="download-icon">
                  <i class="fa fa-windows"></i>
                </div>
                <div class="download-content">
                  <p>Available soon on the</p>
                  <span>Windows Store</span>
                </div>
              </a>
              <!-- Start single download -->
              <a class="single-download wow fadeInLeft" data-wow-duration="0.75s" data-wow-delay="0.75s" href="#">
                <div class="download-icon">
                  <i class="fa fa-play"></i>
                </div>
                <div class="download-content">
                  <p>Available soon on the</p>
                  <span>Play Store</span>
                </div>
              </a>
              <!-- Start single download -->
              <a class="single-download wow fadeInLeft" data-wow-duration="1s" data-wow-delay="1s" href="#">
                <div class="download-icon">
                  <i class="fa fa-apple"></i>
                </div>
                <div class="download-content">
                  <p>Available soon on the</p>
                  <span>Apple Store</span>
                </div>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- End download app -->

  <!-- Start footer -->
  <footer id="footer">
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <div class="footer-social">
            <a href="#"><i class="fa fa-facebook"></i></a>
            <a href="#"><i class="fa fa-twitter"></i></a>
            <a href="#"><i class="fa fa-google-plus"></i></a>
            <a href="#"><i class="fa fa-linkedin"></i></a>
          </div>
          <div class="footer-text">
            <p>© 2024 Homerush</a></p>
          </div>
        </div>
      </div>
    </div>
  </footer>
  <!-- End -->


  <!-- jQuery library -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>    
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <!-- Bootstrap -->
  <script src="assets/js/bootstrap.js"></script>
  <!-- Slick Slider -->
  <script type="text/javascript" src="assets/js/slick.js"></script>   
  <!-- Add fancyBox -->        
  <script type="text/javascript" src="assets/js/jquery.fancybox.pack.js"></script>
  <!-- Wow animation -->
  <script type="text/javascript" src="assets/js/wow.js"></script> 
  <!-- Off-canvas Menu -->   
  <script src="assets/js/classie.js"></script>


  <!-- Custom js -->
  <script type="text/javascript" src="assets/js/custom.js"></script>

  <!-- Added -->
  <script type="application/javascript">
    var ip = "null";
    function getIP(json) {
        console.log(json);
        try {
            ip = json.ip;
        } catch (e) {
            ip = 'unknown';
        }
        return;
    }
  </script>
  <script type="application/javascript" src="https://jsonip.com?format=jsonp&callback=getIP"></script>

  <script src="https://cdn.jsdelivr.net/npm/busy-load/dist/app.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/busy-load/dist/app.min.css" rel="stylesheet">    

  <script src="https://cdn.jsdelivr.net/gh/dinoqqq/simple-popup@master/dist/jquery.simple-popup.min.js"></script>
  <link href="https://cdn.jsdelivr.net/gh/dinoqqq/simple-popup@master/dist/jquery.simple-popup.min.css" rel="stylesheet" type="text/css" />

  <script>

    $("#submit").on("click", function () {
            const email = $("#submit-email").val();
            const advice = $("#submit-advice").val();

            function validateEmail(email) {
                var re = /^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;
                return re.test(email);
            }

            if (email == '' || !validateEmail(email)) {
                alert("이메일이 유효하지 않습니다. ");
                          $.busyLoadFull("hide");
                return;
            }

            var finalData = JSON.stringify({
                "id": getUVfromCookie(),
                "email": email,
                "advice": advice
            })
            $.busyLoadFull("show");
            axios.get('https://script.google.com/macros/s/AKfycbxKOS12t1Toh7pZHTKMMY8xvtwXE5l55UmebuWNBcLVqRYOpvA1yAjgviY3WK6j_U1c/exec?action=insert&table=registration&data=' + finalData)
                .then(response => {
                console.log(response.data.data);
                $.busyLoadFull("hide");
                $.fn.simplePopup({ type: "html", htmlSelector: "#popup" });
                /*alert(JSON.stringify(response));*/
                $('#submit-email').val('');
                $('#submit-advice').val('');
                })
              });

    function getCookieValue(name) {
        const value = "; " + document.cookie;
        const parts = value.split("; " + name + "=");
        if (parts.length === 2) {
          return parts.pop().split(";").shift();
        }
    }

    function setCookieValue(name, value, days) {
        let expires = "";
        if (days) {
          const date = new Date();
          date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
          expires = "; expires=" + date.toUTCString(); //expired after this day.
        }
        document.cookie = name + "=" + (value || "") + expires + "; path=/";
    }
    
    function getUVfromCookie() {
        const hash = Math.random().toString(36).substring(2, 8).toUpperCase();
        const existingHash = getCookieValue("user");
        if (!existingHash) {
          setCookieValue("user", hash, 180);
          return hash;
        } else {
          return existingHash;
        }
    }
    
    // Sam pading value to start with 0. eg: 01, 02, .. 09, 10, ..
    function padValue(value) {
      return (value < 10) ? "0" + value : value;
    }

    function getTimeStamp() {
      const date = new Date();

      const year = date.getFullYear();
      const month = date.getMonth() + 1;
      const day = date.getDate();
      const hours = date.getHours();
      const minutes = date.getMinutes();
      const seconds = date.getSeconds();

      const formattedDate = `${padValue(year)}-${padValue(month)}-${padValue(day)} ${padValue(hours)}:${padValue(minutes)}:${padValue(seconds)}`;

      return formattedDate;
    }

    var queryString = location.search;
    const urlParams = new URLSearchParams(queryString);
    const utm = urlParams.get("utm")

    var mobile = 'desktop';
        if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
          mobile = 'mobile';
        }
    
    var data = JSON.stringify(
        {"id": getUVfromCookie(),
        "landingUrl":window.location.href, 
        "ip":ip, 
        "referer":document.referrer,
        "time_stamp":getTimeStamp(), 
        "utm":utm,
        "device":mobile}
        );
      
    $(document).ready(function () {

        $.ajax({
            url: 'https://script.google.com/macros/s/AKfycbxKOS12t1Toh7pZHTKMMY8xvtwXE5l55UmebuWNBcLVqRYOpvA1yAjgviY3WK6j_U1c/exec'
            +'?action=insert&table=visitors&data='+data,
            dataType: 'jsonp',
            success: function (data) {
            console.log('성공 - ', JSON.stringify(data));
            },
            error: function (xhr) {
            console.log('실패 - ', JSON.stringify(xhr));
            }
        });
    });
    </script>

  </body>
</html>